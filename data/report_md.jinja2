# mac dot report



{% set managed_items = [] %}
{% for item in csv_data %}
  {% if item.cat_1_name_cf is not none and item.cat_1_name_cf != 'None' %}
    {% set _ = managed_items.append(item) %}
  {% endif %}
{% endfor %}

{% if fs_not_in_di and fs_not_in_di|length > 0 %}
*♦️ New unmanaged item{{ fs_not_in_di|length > 1 and 's' or '' }} in $HOME ({{ fs_not_in_di|length }})*
{% else %}
*✅ No new unmanaged items in $HOME.*
{% endif %}

{% for item in managed_items %}
{% if loop.first or item.cat_1_cf != loop.previtem.cat_1_cf %}

### {{ item.cat_1_name_cf }}
{% endif %}

{% if loop.first or item.cat_2_cf != loop.previtem.cat_2_cf %}
#### {{ item.cat_1_cf }}: {{ item.cat_2_cf }}
{% endif %}

{% set state_val = item.dot_state %}
{% if state_val is none or state_val == 'None' or state_val == 'nan' or state_val == '' %}
  {% if item.dot_struc == 'hm' or item.dot_struc_cf == 'hm' %}
    {% set state_val = 'NoSym' %}
  {% elif item.repo_scope_cf == 'private' %}
    {% set state_val = 'Local' %}
  {% else %}
    {% set state_val = 'Synced' %}
  {% endif %}
{% endif %}
{% set state_suffix = '' %}
{% if state_val == 'NoSym' %}
  {% set state_suffix = ' [NoSym]' %}
{% endif %}
{% set display_type = item.item_type %}
{% if display_type is none or display_type == 'None' or display_type == 'nan' or display_type == '' %}
  {% set display_type = item.item_type_rp %}
{% endif %}
{% if display_type is none or display_type == 'None' or display_type == 'nan' or display_type == '' %}
  {% set display_type = item.item_type_hm %}
{% endif %}
{% if display_type is none or display_type == 'None' or display_type == 'nan' or display_type == '' %}
  {% set display_type = item.item_type_rp_cf %}
{% endif %}
{% if display_type is none or display_type == 'None' or display_type == 'nan' or display_type == '' %}
  {% set display_type = item.item_type_hm_cf %}
{% endif %}
{% if display_type is none or display_type == 'None' or display_type == 'nan' or display_type == '' %}
  {% set display_type = item.item_type_rp_db %}
{% endif %}
{% if display_type is none or display_type == 'None' or display_type == 'nan' or display_type == '' %}
  {% set display_type = item.item_type_hm_db %}
{% endif %}
{% set is_folder = display_type in ['folder', 'folder_sym', 'folder_alias'] %}
{% if is_folder %}
  {% if state_val == 'NoSym' %}
- **_{{ item.item_name }}{{ state_suffix }}{% if item.comment_cf %} | {{ item.comment_cf.strip() }}{% endif %} (ƒ)_**
  {% else %}
- **{{ item.item_name }}{{ state_suffix }}{% if item.comment_cf %} | {{ item.comment_cf.strip() }}{% endif %} (ƒ)**
  {% endif %}
{% else %}
  {% if state_val == 'NoSym' %}
- _{{ item.item_name }}{{ state_suffix }}{% if item.comment_cf %} | {{ item.comment_cf.strip() }}{% endif %}_
  {% else %}
- {{ item.item_name }}{{ state_suffix }}{% if item.comment_cf %} | {{ item.comment_cf.strip() }}{% endif %}
  {% endif %}
{% endif %}
{% endfor %}

---

### Unmatched Items

#### _Items not in Template (but in Home Folder)_ ♦️
{% for item in fs_not_in_di %}
- {{ item.item_name }}{% if item.item_type in ['folder', 'folder_sym', 'folder_alias'] %} (ƒ){% endif %}

{% endfor %}

#### _Items not in Home Folder (but in Template)_

{% for item in di_not_in_fs %}
- {{ item.item_name }}{% if item.cf_comment %} | {{ item.cf_comment.strip() }}{% endif %}{% if item.item_type in ['folder', 'folder_sym', 'folder_alias'] %} (ƒ){% endif %}

{% endfor %}

---

### Test Fixtures

{% if test_fixtures and test_fixtures|length > 0 %}
{% for fx in test_fixtures %}
- `{{ fx.item_name }}` | scope: `{{ fx.scope }}` | type: `{{ fx.fixture_type }}` | enabled: `{{ fx.enabled }}` | suppress_unmatched: `{{ fx.suppress_unmatched }}` | suppress_alert: `{{ fx.suppress_alert }}`{% if fx.expected_state %} | expected: `{{ fx.expected_state }}`{% endif %}{% if fx.notes %} | {{ fx.notes }}{% endif %}{{ '\n' }}
{% endfor %}
{% else %}
- (none)
{% endif %}
